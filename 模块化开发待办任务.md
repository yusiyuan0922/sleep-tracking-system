# 睡眠小程序模块化开发待办任务清单

**项目名称**: 失眠患者用药跟踪与量表填写系统
**文档版本**: V1.0
**编写日期**: 2025年1月
**开发模式**: 模块化并行开发

---

## 📊 开发阶段概览

| 阶段 | 模块名称 | 优先级 | 依赖关系 | 预估工期 |
|------|----------|--------|----------|----------|
| 第1阶段 | 基础设施模块 | ⭐⭐⭐⭐⭐ | 无 | 2周 |
| 第2阶段 | 用户管理模块 | ⭐⭐⭐⭐ | 基础设施 | 2周 |
| 第3阶段 | 量表管理模块 | ⭐⭐⭐⭐ | 基础设施 | 3周 (可并行) |
| 第4阶段 | 阶段流程核心模块 | ⭐⭐⭐⭐⭐ | 用户管理+量表管理 | 4周 |
| 第5阶段 | 审核系统模块 | ⭐⭐⭐⭐ | 阶段流程 | 2周 |
| 第6阶段 | 消息通知模块 | ⭐⭐⭐ | 业务模块 | 2周 |
| 第7阶段 | 数据统计与导出模块 | ⭐⭐⭐ | 完整数据 | 2周 |

**总预估工期**: 17周 (约4个月,考虑并行开发)

---

## 第1阶段:基础设施模块 (优先级:⭐⭐⭐⭐⭐)

### 依赖关系
- **前置依赖**: 无
- **后续依赖**: 所有模块都依赖此阶段

### 1.1 数据库模块

#### 后端任务
- [ ] **数据库环境搭建**
  - 安装PostgreSQL 14+
  - 配置数据库参数(连接池、字符集、时区)
  - 创建数据库 `sleep_tracking`
  - 配置备份策略
  - **预估时间**: 0.5天

- [ ] **数据表结构创建**
  - 创建16张数据表(参考数据库设计文档)
    - users (用户基础表)
    - hospitals (医院表)
    - doctors (医生表)
    - patients (患者表)
    - stage_records (阶段记录表)
    - scale_configs (量表配置表)
    - scale_records (量表记录表)
    - medication_records (用药记录表)
    - concomitant_medications (合并用药表)
    - adverse_events (不良事件表)
    - ae_attachments (AE附件表)
    - medical_files (病例文件表)
    - audit_logs (审核记录表)
    - push_messages (推送消息表)
    - system_configs (系统配置表)
    - operation_logs (操作日志表)
  - **预估时间**: 1天

- [ ] **索引创建**
  - 唯一索引(uk_users_openid, uk_patients_patient_no等)
  - 普通索引(idx_patients_doctor_id等)
  - GIN索引(JSONB字段)
  - 复合索引(常用查询组合)
  - **预估时间**: 0.5天

- [ ] **外键约束设置**
  - 设置所有表的外键关系
  - 配置级联策略(CASCADE/RESTRICT/SET NULL)
  - **预估时间**: 0.5天

- [ ] **触发器编写**
  - `update_updated_at_column()` - 自动更新updated_at
  - `calculate_v2_window()` - V1审核通过后计算V2时间窗口
  - `calculate_v3_window()` - V2审核通过后计算V3时间窗口
  - `calculate_v4_window()` - V3审核通过后计算V4时间窗口
  - `mark_patient_completed()` - V4审核通过后标记完成
  - `mark_serious_ae()` - 自动标记严重AE
  - `calculate_medication_duration()` - 用药天数自动计算
  - `generate_patient_no()` - 患者编号自动生成
  - **预估时间**: 1天

- [ ] **数据初始化**
  - 系统配置数据(时间窗口参数、文件上传参数等)
  - 量表配置数据(6个量表的JSON配置)
  - 超级管理员账户
  - **预估时间**: 1天

**数据库模块总计**: 4.5天

---

### 1.2 认证系统模块

#### 后端任务
- [ ] **微信登录接口**
  - 微信code换取session_key和openid
  - 解密用户信息
  - 自动创建用户记录
  - **接口**: `POST /auth/wx-login`
  - **预估时间**: 1天

- [ ] **JWT Token生成与验证**
  - Token生成(包含用户ID、角色)
  - Token验证中间件
  - Token刷新机制
  - **预估时间**: 0.5天

- [ ] **权限控制(RBAC)**
  - 角色定义(admin/doctor/patient)
  - 权限守卫(Guards)
  - 装饰器(@Roles, @Public)
  - **预估时间**: 1天

- [ ] **Session管理**
  - Redis集成
  - Session存储与读取
  - 过期策略
  - **预估时间**: 0.5天

#### 前端任务(小程序)
- [ ] **微信授权登录**
  - wx.login获取code
  - 调用后端登录接口
  - 存储Token到Storage
  - **预估时间**: 1天

- [ ] **Token管理**
  - 请求拦截器自动添加Token
  - Token过期自动刷新
  - 登录状态检查
  - **预估时间**: 0.5天

- [ ] **权限验证**
  - 页面访问权限检查
  - 按钮/功能权限控制
  - **预估时间**: 0.5天

#### 前端任务(Web)
- [ ] **登录页面**
  - 账号密码登录表单
  - 验证码(图形验证码或短信验证码)
  - Token存储到LocalStorage
  - **预估时间**: 1天

- [ ] **权限路由**
  - 路由守卫
  - 角色路由权限
  - 动态菜单生成
  - **预估时间**: 1天

**认证系统模块总计**: 7.5天

---

### 1.3 文件上传服务模块

#### 后端任务
- [ ] **阿里云OSS集成**
  - OSS SDK配置
  - 获取临时上传凭证(STS Token)
  - 文件URL签名
  - **预估时间**: 1天

- [ ] **文件上传接口**
  - 文件类型校验(image/pdf/doc)
  - 文件大小校验(≤10MB)
  - 生成唯一文件名(UUID)
  - 上传到OSS
  - 返回文件URL
  - **接口**: `POST /files/upload`
  - **预估时间**: 1天

- [ ] **文件删除接口**
  - 从OSS删除文件
  - 删除数据库记录
  - **接口**: `DELETE /files/:id`
  - **预估时间**: 0.5天

- [ ] **文件预览接口**
  - 生成带过期时间的签名URL
  - **接口**: `GET /files/:id/preview`
  - **预估时间**: 0.5天

#### 前端任务(小程序)
- [ ] **文件上传组件**
  - 选择图片(wx.chooseImage)
  - 选择文件(wx.chooseMessageFile)
  - 上传进度显示
  - 上传成功/失败提示
  - **预估时间**: 1.5天

- [ ] **文件预览组件**
  - 图片预览(wx.previewImage)
  - PDF预览(wx.openDocument)
  - 文件下载
  - **预估时间**: 1天

#### 前端任务(Web)
- [ ] **文件上传组件**
  - 拖拽上传
  - 点击上传
  - 进度条显示
  - 文件列表展示
  - **预估时间**: 1.5天

- [ ] **文件预览组件**
  - 图片预览(lightbox)
  - PDF在线预览
  - 文件下载
  - **预估时间**: 1天

**文件上传服务模块总计**: 8天

---

### 1.4 基础API框架

#### 后端任务
- [ ] **项目初始化**
  - Nest.js项目创建
  - 目录结构设计
  - 配置文件(config, env)
  - **预估时间**: 0.5天

- [ ] **ORM配置(TypeORM)**
  - 数据库连接配置
  - Entity定义(16个实体)
  - Repository注入
  - **预估时间**: 1天

- [ ] **全局异常处理**
  - 自定义异常类
  - 全局异常过滤器
  - 统一错误响应格式
  - **预估时间**: 0.5天

- [ ] **日志系统**
  - Winston集成
  - 日志分级(info/warn/error)
  - 日志文件管理(按日期分割)
  - **预估时间**: 1天

- [ ] **接口文档(Swagger)**
  - Swagger配置
  - DTO装饰器
  - 接口分组
  - **预估时间**: 0.5天

- [ ] **数据验证**
  - class-validator集成
  - DTO验证规则
  - 自定义验证器
  - **预估时间**: 0.5天

#### 前端任务(小程序)
- [ ] **项目初始化**
  - 微信小程序项目创建
  - Vant Weapp组件库集成
  - MobX状态管理
  - **预估时间**: 1天

- [ ] **网络请求封装**
  - wx.request封装
  - 统一错误处理
  - 加载提示(Loading)
  - **预估时间**: 1天

- [ ] **基础组件**
  - 导航栏组件
  - 底部TabBar
  - 空状态组件
  - 加载组件
  - **预估时间**: 1.5天

#### 前端任务(Web)
- [ ] **项目初始化**
  - Vue 3 + Vite项目创建
  - Element Plus / Ant Design Vue集成
  - Pinia状态管理
  - Vue Router路由配置
  - **预估时间**: 1天

- [ ] **HTTP请求封装**
  - Axios封装
  - 请求/响应拦截器
  - 统一错误处理
  - Loading全局管理
  - **预估时间**: 1天

- [ ] **布局框架**
  - 侧边栏布局
  - 顶部导航栏
  - 面包屑导航
  - **预估时间**: 1.5天

**基础API框架总计**: 11天

---

## 第1阶段总结

**总任务数**: 62个任务
**总预估工期**: 31天 (约6周,考虑并行开发可压缩到2周)
**关键交付物**:
- ✅ 完整的数据库结构(16张表+触发器)
- ✅ 微信登录+JWT认证系统
- ✅ 文件上传服务(OSS集成)
- ✅ 前后端基础框架

**并行开发建议**:
- 后端数据库+认证系统(1人,1周)
- 后端文件上传+基础框架(1人,1周)
- 前端小程序框架(1人,1周)
- 前端Web框架(1人,1周)

---

## 第2阶段:用户管理模块 (优先级:⭐⭐⭐⭐)

### 依赖关系
- **前置依赖**: 第1阶段(基础设施模块)
- **后续依赖**: 第4阶段(阶段流程核心模块)

### 2.1 医院管理子模块

#### 后端任务
- [ ] **医院CRUD接口**
  - 创建医院: `POST /hospitals`
  - 医院列表: `GET /hospitals` (支持分页、搜索)
  - 医院详情: `GET /hospitals/:id`
  - 更新医院: `PUT /hospitals/:id`
  - 删除医院: `DELETE /hospitals/:id` (软删除,修改status)
  - 医院状态管理: `PATCH /hospitals/:id/status`
  - **预估时间**: 2天

- [ ] **数据校验**
  - 医院名称唯一性校验
  - 联系方式格式校验
  - **预估时间**: 0.5天

#### 前端任务(Web后台)
- [ ] **医院列表页面**
  - 表格展示(名称、省份、城市、状态)
  - 搜索功能(名称、城市)
  - 分页功能
  - 新增医院按钮
  - **预估时间**: 1.5天

- [ ] **医院表单页面**
  - 新增/编辑表单
  - 字段验证
  - 提交保存
  - **预估时间**: 1天

- [ ] **医院详情页面**
  - 基本信息展示
  - 关联医生列表
  - 关联患者统计
  - **预估时间**: 1天

**医院管理子模块总计**: 6天

---

### 2.2 医生注册与审核子模块

#### 后端任务
- [ ] **医生注册接口**
  - 提交注册申请: `POST /doctors/register`
  - 上传资质证明文件
  - 创建doctors记录(audit_status='pending')
  - **预估时间**: 1天

- [ ] **医生审核接口**
  - 待审核医生列表: `GET /doctors/pending` (超级管理员)
  - 审核通过: `POST /doctors/:id/approve`
  - 审核驳回: `POST /doctors/:id/reject`
  - 更新audit_status和audit_remark
  - **预估时间**: 1天

- [ ] **医生信息管理接口**
  - 医生列表: `GET /doctors` (支持按医院筛选)
  - 医生详情: `GET /doctors/:id`
  - 更新医生信息: `PUT /doctors/:id`
  - **预估时间**: 1天

#### 前端任务(小程序 - 医生端)
- [ ] **医生注册页面**
  - 表单(姓名、工号、医院选择、科室、职称、联系方式)
  - 资质证明上传
  - 提交申请
  - **预估时间**: 2天

- [ ] **审核状态查看页面**
  - 显示审核状态(待审核/已通过/已驳回)
  - 驳回原因展示
  - **预估时间**: 0.5天

#### 前端任务(Web后台 - 超级管理员)
- [ ] **待审核医生列表页面**
  - 表格展示(姓名、医院、科室、申请时间)
  - 查看详情按钮
  - **预估时间**: 1天

- [ ] **医生审核详情页面**
  - 医生信息展示
  - 资质证明查看
  - 审核通过/驳回操作
  - 驳回原因输入框
  - **预估时间**: 1.5天

- [ ] **医生管理列表页面**
  - 所有医生列表
  - 按医院筛选
  - 按状态筛选
  - 查看详情
  - **预估时间**: 1.5天

**医生注册与审核子模块总计**: 9.5天

---

### 2.3 患者注册与绑定子模块

#### 后端任务
- [ ] **患者注册接口**
  - 提交基本信息: `POST /patients/register`
  - 自动生成patient_no (P+年月日时分秒+随机4位)
  - 自动绑定医生(无需医生确认)
  - 创建patients记录(current_stage='V1')
  - **预估时间**: 1.5天

- [ ] **患者信息管理接口**
  - 患者列表: `GET /patients` (支持按医生、医院、阶段筛选)
  - 患者详情: `GET /patients/:id`
  - 更新患者信息: `PUT /patients/:id`
  - 患者阶段历史: `GET /patients/:id/stages`
  - **预估时间**: 1.5天

- [ ] **数据校验**
  - 手机号格式校验
  - 出生日期合理性校验
  - 医生必须已审核通过
  - **预估时间**: 0.5天

#### 前端任务(小程序 - 患者端)
- [ ] **患者注册页面**
  - 表单(姓名、性别、出生日期、手机号)
  - 就诊医院选择(下拉)
  - 主治医生选择(根据医院筛选)
  - 日期选择器
  - 提交注册
  - **预估时间**: 2天

- [ ] **个人中心页面**
  - 基本信息展示
  - 患者编号展示
  - 主治医生信息
  - 当前阶段状态
  - 信息编辑入口
  - **预估时间**: 1.5天

#### 前端任务(Web后台 - 医生端)
- [ ] **患者列表页面**
  - 表格展示(姓名、编号、性别、年龄、当前阶段、入组日期)
  - 搜索功能(姓名、编号)
  - 按阶段筛选
  - 查看详情按钮
  - **预估时间**: 2天

- [ ] **患者详情页面**
  - 基本信息展示
  - 阶段进度展示(时间轴)
  - 量表记录概览
  - AE记录概览
  - 用药记录概览
  - **预估时间**: 2.5天

**患者注册与绑定子模块总计**: 11.5天

---

## 第2阶段总结

**总任务数**: 27个任务
**总预估工期**: 27天 (约5.5周,考虑并行开发可压缩到2周)
**关键交付物**:
- ✅ 医院管理功能(增删改查)
- ✅ 医生注册与超级管理员审核流程
- ✅ 患者注册与自动绑定医生功能
- ✅ 完整的用户管理后台

**并行开发建议**:
- 后端医院+医生模块(1人,1.5周)
- 后端患者模块(1人,1周)
- 前端小程序患者端(1人,1.5周)
- 前端Web后台(1人,2周)

---

## 第3阶段:量表管理模块 (优先级:⭐⭐⭐⭐)

### 依赖关系
- **前置依赖**: 第1阶段(基础设施模块)
- **后续依赖**: 第4阶段(阶段流程核心模块)
- **特点**: 可与第2阶段并行开发

### 3.1 量表配置子模块

#### 后端任务
- [ ] **量表配置数据初始化**
  - 将量表.md转换为JSON格式
  - 录入6个量表配置到scale_configs表
    - AIS (雅典失眠量表) - 8题,0-3分,总分0-24
    - ESS (Epworth嗜睡量表) - 8题,0-3分,总分0-24
    - GAD-7 (广泛性焦虑量表) - 7题,0-3分,总分0-21
    - PHQ-9 (患者健康问卷抑郁量表) - 9题,0-3分,总分0-27
    - HAMA (汉密尔顿焦虑量表) - 14题,0-4分,总分0-56
    - HAMD (汉密尔顿抑郁量表24项) - 24题,复杂评分
  - **预估时间**: 2天

- [ ] **量表配置查询接口**
  - 获取所有量表列表: `GET /scales`
  - 获取单个量表配置: `GET /scales/:code`
  - 返回JSONB格式的题目和选项
  - **预估时间**: 0.5天

**量表配置子模块总计**: 2.5天

---

### 3.2 量表填写引擎子模块

#### 后端任务
- [ ] **量表记录保存接口**
  - 保存量表答题记录: `POST /scale-records`
  - 接收患者ID、阶段记录ID、量表代码、答题详情
  - 自动计算总分(根据scoring规则)
  - 保存到scale_records表
  - **预估时间**: 2天

- [ ] **自动计分逻辑**
  - AIS/ESS/GAD-7/PHQ-9: 各题得分相加
  - HAMA: 各题得分相加
  - HAMD: 根据复杂评分规则计算
  - **预估时间**: 1.5天

- [ ] **量表记录查询接口**
  - 患者量表记录列表: `GET /scale-records?patient_id=xx`
  - 单个量表记录详情: `GET /scale-records/:id`
  - 按阶段筛选
  - 按量表类型筛选
  - **预估时间**: 1天

- [ ] **量表历史对比接口**
  - 同一量表不同阶段对比: `GET /scale-records/compare`
  - 返回各阶段得分趋势
  - **预估时间**: 1天

#### 前端任务(小程序 - 患者端)
- [ ] **量表填写通用组件**
  - 单选题组件(Radio)
  - 题目序号和进度条
  - 上一题/下一题按钮
  - 提交确认弹窗
  - **预估时间**: 2天

- [ ] **量表答题进度保存**
  - 本地缓存(wx.setStorageSync)
  - 页面返回时恢复进度
  - 提交成功后清除缓存
  - **预估时间**: 1天

- [ ] **AIS量表页面**
  - 8题展示
  - 答题逻辑
  - 提交保存
  - **预估时间**: 1.5天

- [ ] **ESS量表页面**
  - 8题展示
  - 答题逻辑
  - 提交保存
  - **预估时间**: 1.5天

- [ ] **GAD-7量表页面**
  - 7题展示
  - 答题逻辑
  - 提交保存
  - **预估时间**: 1.5天

- [ ] **PHQ-9量表页面**
  - 9题展示
  - 答题逻辑
  - 提交保存
  - **预估时间**: 1.5天

- [ ] **量表结果展示页面**
  - 总分展示
  - 各题答案回顾
  - 分数说明
  - **预估时间**: 1天

- [ ] **量表历史记录页面**
  - 按阶段分组展示
  - 历史得分列表
  - 查看详情
  - **预估时间**: 1.5天

**量表填写引擎子模块总计**: 16天

---

### 3.3 医生代填量表子模块

#### 后端任务
- [ ] **医生代填权限控制**
  - 校验医生身份
  - 校验患者是否为该医生管理
  - **预估时间**: 0.5天

- [ ] **HAMA量表接口**
  - 医生代填HAMA量表: `POST /scale-records/doctor-fill`
  - 14题,0-4分,自动计分
  - **预估时间**: 1天

- [ ] **HAMD量表接口**
  - 医生代填HAMD量表: `POST /scale-records/doctor-fill`
  - 24题,复杂评分规则
  - **预估时间**: 1.5天

#### 前端任务(小程序 - 医生端)
- [ ] **HAMA量表代填页面**
  - 14题展示
  - 5级评分选择(0-4分)
  - 提交保存
  - **预估时间**: 2天

- [ ] **HAMD量表代填页面**
  - 24题展示
  - 不同题目不同评分标准
  - 提交保存
  - **预估时间**: 2.5天

#### 前端任务(Web后台 - 医生端)
- [ ] **量表数据统计页面**
  - 患者量表得分趋势图表(ECharts)
  - 各量表平均分统计
  - 量表完成率统计
  - **预估时间**: 2天

- [ ] **量表结果导出功能**
  - 导出Excel(所有量表数据)
  - 导出PDF(标准化报告格式)
  - **预估时间**: 1.5天

**医生代填量表子模块总计**: 11天

---

## 第3阶段总结

**总任务数**: 25个任务
**总预估工期**: 29.5天 (约6周,考虑并行开发可压缩到3周)
**关键交付物**:
- ✅ 6个量表配置数据(JSON格式)
- ✅ 量表填写通用组件
- ✅ 4个患者自评量表(AIS/ESS/GAD-7/PHQ-9)
- ✅ 2个医生代填量表(HAMA/HAMD)
- ✅ 自动计分引擎
- ✅ 量表结果对比和导出功能

**并行开发建议**:
- 后端量表配置+计分引擎(1人,1.5周)
- 后端医生代填量表(1人,1周)
- 前端小程序患者自评量表(1人,2周)
- 前端小程序医生代填量表(1人,1.5周)
- 前端Web统计与导出(1人,1.5周)

**重要提示**: 此阶段可与第2阶段并行开发,只需基础设施模块完成即可

---

## 第4阶段:阶段流程核心模块 (优先级:⭐⭐⭐⭐⭐)

### 依赖关系
- **前置依赖**: 第2阶段(用户管理) + 第3阶段(量表管理)
- **后续依赖**: 第5阶段(审核系统) + 第6阶段(消息通知)

### 4.1 阶段记录管理子模块

#### 后端任务
- [ ] **阶段记录创建接口**
  - 创建阶段记录: `POST /stage-records`
  - 自动创建stage_records记录(status='draft')
  - 校验患者当前阶段
  - **预估时间**: 1天

- [ ] **阶段记录查询接口**
  - 患者阶段记录列表: `GET /stage-records?patient_id=xx`
  - 单个阶段记录详情: `GET /stage-records/:id`
  - 阶段完整度检查(所有必填项是否完成)
  - **预估时间**: 1天

- [ ] **阶段提交接口**
  - 提交阶段资料: `POST /stage-records/:id/submit`
  - 校验必填项完整性
  - 更新status='submitted'
  - 记录submitted_at时间
  - **预估时间**: 1天

- [ ] **时间窗口验证逻辑**
  - 校验当前日期是否在时间窗口内
  - V2: v2_window_start ≤ 当前日期 ≤ v2_window_end
  - V3: v3_window_start ≤ 当前日期 ≤ v3_window_end
  - V4: v4_window_start ≤ 当前日期 ≤ v4_window_end
  - **预估时间**: 1天

**阶段记录管理子模块总计**: 4天

---

### 4.2 V1阶段子模块

#### 后端任务
- [ ] **V1阶段必填项校验**
  - 病例文件(至少1个)
  - 4个自评量表(AIS/ESS/GAD-7/PHQ-9)
  - 2个医生代填量表(HAMA/HAMD)
  - 用药记录(莱博雷生)
  - **预估时间**: 1天

#### 前端任务(小程序 - 患者端)
- [ ] **V1阶段主页**
  - 任务清单卡片
    - [ ] 上传病例资料
    - [ ] 填写AIS量表
    - [ ] 填写ESS量表
    - [ ] 填写GAD-7量表
    - [ ] 填写PHQ-9量表
    - [ ] 等待医生填写HAMA量表
    - [ ] 等待医生填写HAMD量表
    - [ ] 记录AE(可选)
    - [ ] 填写用药记录
  - 完成进度展示(X/9)
  - 提交审核按钮(全部完成后启用)
  - **预估时间**: 2天

- [ ] **病例上传页面**
  - 文件选择(图片/PDF/文档)
  - 文件分类选择(检查报告/影像资料/病历记录/其他)
  - 已上传文件列表
  - 文件预览
  - 删除文件
  - **预估时间**: 2天

- [ ] **用药记录表单(V1)**
  - 药物名称:莱博雷生(固定)
  - 剂量选择:5mg / 10mg(单选)
  - 用药频率选择
  - 开始日期选择
  - 结束日期选择(可选)
  - 备注输入
  - 提交保存
  - **预估时间**: 1.5天

- [ ] **AE记录表单**
  - 事件名称/描述
  - 严重程度选择(轻度/中度/重度)
  - 发生日期和时间
  - 持续时间输入
  - 与研究药物关系选择
  - 是否需要医疗干预
  - 处理措施描述
  - 结局选择
  - 附件上传(可选)
  - 提交保存
  - **预估时间**: 2天

- [ ] **提交审核确认页面**
  - 完成情况总结
  - 未完成项提示
  - 提交确认弹窗
  - 提交成功反馈
  - **预估时间**: 1天

**V1阶段子模块总计**: 9.5天

---

### 4.3 V2阶段子模块

#### 后端任务
- [ ] **V2阶段必填项校验**
  - 合并用药记录(至少1条)
  - 4个自评量表(AIS/ESS/GAD-7/PHQ-9)
  - 用药记录(莱博雷生)
  - **预估时间**: 0.5天

- [ ] **合并用药接口**
  - 添加合并用药: `POST /concomitant-medications`
  - 合并用药列表: `GET /concomitant-medications?patient_id=xx&stage_record_id=xx`
  - 更新合并用药: `PUT /concomitant-medications/:id`
  - 删除合并用药: `DELETE /concomitant-medications/:id`
  - **预估时间**: 1.5天

#### 前端任务(小程序 - 患者端)
- [ ] **V2阶段主页**
  - 任务清单卡片
    - [ ] 填写合并用药
    - [ ] 填写AIS量表
    - [ ] 填写ESS量表
    - [ ] 填写GAD-7量表
    - [ ] 填写PHQ-9量表
    - [ ] 记录AE(可选)
    - [ ] 填写用药记录
  - 时间窗口提示(距离截止还有X天)
  - 完成进度展示
  - 提交审核按钮
  - **预估时间**: 1.5天

- [ ] **合并用药管理页面**
  - 合并用药列表
  - 添加合并用药按钮
  - 编辑/删除操作
  - **预估时间**: 1.5天

- [ ] **合并用药表单**
  - 药品名称输入
  - 药品分类选择(降压药/降糖药/抗抑郁药/抗焦虑药/其他)
  - 剂量输入
  - 用药频率输入
  - 用药原因/适应症输入
  - 开始日期选择
  - 结束日期选择(或勾选"持续中")
  - 提交保存
  - **预估时间**: 1.5天

**V2阶段子模块总计**: 6天

---

### 4.4 V3阶段子模块

#### 后端任务
- [ ] **V3阶段必填项校验**
  - 病例文件(至少1个)
  - 4个自评量表(AIS/ESS/GAD-7/PHQ-9)
  - 2个医生代填量表(HAMA/HAMD)
  - 用药记录(莱博雷生)
  - **预估时间**: 0.5天

#### 前端任务(小程序 - 患者端)
- [ ] **V3阶段主页**
  - 任务清单卡片(与V1类似)
  - 时间窗口提示
  - 完成进度展示
  - 提交审核按钮
  - **预估时间**: 1天

- [ ] **复用V1的病例上传页面**
  - 无需重新开发
  - **预估时间**: 0天

- [ ] **复用V1的用药记录表单**
  - 无需重新开发
  - **预估时间**: 0天

**V3阶段子模块总计**: 1.5天

---

### 4.5 V4阶段子模块

#### 后端任务
- [ ] **V4阶段必填项校验**
  - 合并用药记录(至少1条)
  - 4个自评量表(AIS/ESS/GAD-7/PHQ-9)
  - **预估时间**: 0.5天

#### 前端任务(小程序 - 患者端)
- [ ] **V4阶段主页**
  - 任务清单卡片(与V2类似)
  - 时间窗口提示
  - 完成进度展示
  - 提交审核按钮
  - **预估时间**: 1天

- [ ] **复用V2的合并用药管理页面**
  - 无需重新开发
  - **预估时间**: 0天

**V4阶段子模块总计**: 1.5天

---

### 4.6 病例文件管理子模块

#### 后端任务
- [ ] **病例文件接口**
  - 上传病例文件: `POST /medical-files`
  - 病例文件列表: `GET /medical-files?patient_id=xx&stage_record_id=xx`
  - 删除病例文件: `DELETE /medical-files/:id`
  - 按文件分类筛选
  - **预估时间**: 1.5天

#### 前端任务(小程序 - 患者端)
- [ ] **病例文件列表页面**
  - 按阶段分组展示
  - 文件分类标签
  - 文件预览
  - 文件下载
  - 删除文件(仅草稿状态可删)
  - **预估时间**: 1.5天

#### 前端任务(Web后台 - 医生端)
- [ ] **患者病例文件查看页面**
  - 按阶段筛选
  - 按文件分类筛选
  - 文件预览
  - 文件下载
  - **预估时间**: 1.5天

**病例文件管理子模块总计**: 4.5天

---

### 4.7 用药记录管理子模块

#### 后端任务
- [ ] **用药记录接口**
  - 添加用药记录: `POST /medication-records`
  - 用药记录列表: `GET /medication-records?patient_id=xx`
  - 用药记录详情: `GET /medication-records/:id`
  - 更新用药记录: `PUT /medication-records/:id`
  - 用药天数自动计算(触发器)
  - **预估时间**: 1.5天

#### 前端任务(小程序 - 患者端)
- [ ] **用药记录历史页面**
  - 按阶段分组展示
  - 用药记录卡片(药物名称、剂量、用药时间)
  - 查看详情
  - **预估时间**: 1.5天

#### 前端任务(Web后台 - 医生端)
- [ ] **患者用药记录查看页面**
  - 时间轴展示
  - 按阶段筛选
  - 用药依从性分析
  - **预估时间**: 1.5天

**用药记录管理子模块总计**: 4.5天

---

### 4.8 AE记录管理子模块

#### 后端任务
- [ ] **AE记录接口**
  - 添加AE记录: `POST /adverse-events`
  - AE记录列表: `GET /adverse-events?patient_id=xx`
  - AE记录详情: `GET /adverse-events/:id`
  - 更新AE记录: `PUT /adverse-events/:id`
  - 严重AE自动标记(触发器:severity='severe' 或 outcome='death')
  - **预估时间**: 2天

- [ ] **AE附件接口**
  - 上传AE附件: `POST /ae-attachments`
  - AE附件列表: `GET /ae-attachments?ae_id=xx`
  - 删除AE附件: `DELETE /ae-attachments/:id`
  - **预估时间**: 1天

#### 前端任务(小程序 - 患者端)
- [ ] **AE记录列表页面**
  - AE记录卡片(事件名称、严重程度、发生时间)
  - 按阶段筛选
  - 查看详情
  - 添加AE按钮
  - **预估时间**: 1.5天

- [ ] **AE详情页面**
  - 事件详细信息展示
  - 附件展示和下载
  - 编辑按钮(未提交前可编辑)
  - **预估时间**: 1天

#### 前端任务(Web后台 - 医生端)
- [ ] **患者AE列表页面**
  - 表格展示(事件名称、严重程度、发生时间、结局)
  - 按严重程度筛选
  - 按时间筛选
  - 严重AE标红显示
  - 查看详情
  - **预估时间**: 2天

- [ ] **AE统计报表页面**
  - AE总数统计
  - 严重程度分布饼图
  - AE发生率计算
  - 与药物关系统计
  - **预估时间**: 2天

**AE记录管理子模块总计**: 9.5天

---

## 第4阶段总结

**总任务数**: 35个任务
**总预估工期**: 41天 (约8周,考虑并行开发可压缩到4周)
**关键交付物**:
- ✅ V1-V4四个阶段完整流程
- ✅ 时间窗口验证逻辑
- ✅ 病例文件管理功能
- ✅ 用药记录管理(主要用药+合并用药)
- ✅ AE记录管理(含严重AE自动标记)
- ✅ 阶段提交校验机制

**并行开发建议**:
- 后端阶段记录+V1-V4接口(1人,2周)
- 后端病例文件+用药记录(1人,1.5周)
- 后端AE记录+附件(1人,1.5周)
- 前端小程序V1阶段(1人,2周)
- 前端小程序V2-V4阶段(1人,1.5周)
- 前端Web医生端查看页面(1人,2周)

---

## 第5阶段:审核系统模块 (优先级:⭐⭐⭐⭐)

### 依赖关系
- **前置依赖**: 第4阶段(阶段流程核心模块)
- **后续依赖**: 第6阶段(消息通知模块)

### 5.1 审核流程子模块

#### 后端任务
- [ ] **待审核列表接口**
  - 医生待审核列表: `GET /stage-records/pending?doctor_id=xx`
  - 筛选条件:status='submitted'
  - 按提交时间排序
  - **预估时间**: 1天

- [ ] **审核详情接口**
  - 获取阶段完整信息: `GET /stage-records/:id/detail`
  - 包含:病例文件、量表记录、用药记录、合并用药、AE记录
  - **预估时间**: 1天

- [ ] **审核通过接口**
  - 审核通过: `POST /stage-records/:id/approve`
  - 更新stage_records表:
    - status = 'approved'
    - audit_result = 'approved'
    - audited_at = CURRENT_TIMESTAMP
    - audited_by = 当前医生ID
  - 插入audit_logs记录
  - 触发数据库触发器(计算下一阶段时间窗口)
  - **预估时间**: 1.5天

- [ ] **审核驳回接口**
  - 审核驳回: `POST /stage-records/:id/reject`
  - 必填:驳回原因(reject_reason)
  - 可选:具体修改意见(audit_remark)
  - 更新stage_records表:
    - status = 'rejected'
    - audit_result = 'rejected'
    - reject_reason = 驳回原因
    - audit_remark = 审核意见
    - audited_at = CURRENT_TIMESTAMP
    - audited_by = 当前医生ID
  - 插入audit_logs记录
  - **预估时间**: 1.5天

- [ ] **审核历史接口**
  - 患者审核历史: `GET /audit-logs?patient_id=xx`
  - 阶段审核历史: `GET /audit-logs?stage_record_id=xx`
  - 包含:审核人、审核时间、审核结果、审核意见
  - **预估时间**: 1天

#### 前端任务(小程序 - 医生端)
- [ ] **待审核列表页面**
  - 列表展示(患者姓名、编号、阶段、提交时间)
  - 按阶段筛选
  - 按时间排序
  - 查看详情按钮
  - 未读标记(红点提示)
  - **预估时间**: 2天

- [ ] **审核详情页面**
  - 患者基本信息展示
  - 标签页切换:
    - 病例文件(可预览)
    - 量表记录(展示各量表得分)
    - 用药记录
    - 合并用药(如有)
    - AE记录(如有)
  - 底部操作区:
    - "审核通过"按钮(绿色)
    - "审核不通过"按钮(红色)
  - **预估时间**: 3天

- [ ] **驳回原因弹窗**
  - 常用原因选择(单选):
    - 病例资料不完整
    - 量表填写有误
    - 用药记录不清楚
    - 其他(需填写具体原因)
  - 具体意见输入框(可选)
  - "确认驳回"按钮
  - **预估时间**: 1.5天

- [ ] **审核历史页面**
  - 患者各阶段审核记录
  - 时间轴展示
  - 审核结果标签(通过/驳回)
  - 审核意见展示
  - **预估时间**: 1.5天

#### 前端任务(小程序 - 患者端)
- [ ] **审核状态页面**
  - 当前阶段状态展示:
    - 待审核:等待提示
    - 审核通过:绿色对勾+进入下一阶段按钮
    - 审核未通过:红色叉号+驳回原因+修改后重新提交按钮
  - **预估时间**: 1.5天

- [ ] **审核历史查看页面**
  - 各阶段审核记录
  - 审核时间、审核人、审核结果
  - 驳回原因查看
  - **预估时间**: 1天

#### 前端任务(Web后台 - 医生端)
- [ ] **待审核列表页面(Web版)**
  - 表格展示
  - 高级筛选(阶段、时间范围)
  - 批量操作(批量查看)
  - **预估时间**: 2天

- [ ] **审核详情页面(Web版)**
  - 更详细的信息展示
  - 大屏查看文件和数据
  - 审核操作
  - **预估时间**: 2.5天

**审核流程子模块总计**: 21天

---

### 5.2 审核统计子模块

#### 后端任务
- [ ] **审核统计接口**
  - 医生审核工作量统计: `GET /audit-logs/statistics?doctor_id=xx`
  - 各阶段通过率统计
  - 平均审核时间统计
  - 驳回原因分析
  - **预估时间**: 1.5天

#### 前端任务(Web后台 - 管理员)
- [ ] **审核统计页面**
  - 各医生审核工作量统计
  - 各阶段通过率柱状图
  - 驳回原因饼图
  - 时间范围筛选
  - **预估时间**: 2天

**审核统计子模块总计**: 3.5天

---

## 第5阶段总结

**总任务数**: 16个任务
**总预估工期**: 24.5天 (约5周,考虑并行开发可压缩到2周)
**关键交付物**:
- ✅ 完整的审核流程(通过/驳回)
- ✅ 审核历史记录
- ✅ 驳回后修改重新提交机制
- ✅ 审核统计分析

**并行开发建议**:
- 后端审核接口+统计(1人,1.5周)
- 前端小程序医生端审核(1人,2周)
- 前端小程序患者端状态(1人,1周)
- 前端Web后台审核(1人,1.5周)

---

## 第6阶段:消息通知模块 (优先级:⭐⭐⭐)

### 依赖关系
- **前置依赖**: 第5阶段(审核系统) + 第4阶段(业务模块)
- **后续依赖**: 无

### 6.1 微信订阅消息子模块

#### 后端任务
- [ ] **微信订阅消息配置**
  - 配置微信小程序订阅消息模板
  - 模板ID配置:
    - 审核通过通知
    - 审核驳回通知
    - 阶段开放提醒
    - 阶段超时催办
    - 严重AE提醒
    - 新患者绑定通知
    - 患者提交审核通知
  - **预估时间**: 1天

- [ ] **消息推送服务封装**
  - 封装微信消息推送API
  - 消息模板渲染
  - 推送成功/失败处理
  - 重试机制
  - **预估时间**: 1.5天

- [ ] **审核通过推送**
  - 审核通过后触发
  - 推送患者:"您的[V1/V2/V3/V4]阶段已通过审核"
  - 跳转到下一阶段页面
  - **预估时间**: 0.5天

- [ ] **审核驳回推送**
  - 审核驳回后触发
  - 推送患者:"您的[V1/V2/V3/V4]阶段审核未通过"
  - 包含驳回原因
  - 跳转到修改页面
  - **预估时间**: 0.5天

- [ ] **患者提交审核推送**
  - 患者提交后触发
  - 推送医生:"患者[姓名]已提交[V1/V2/V3/V4]阶段资料,请审核"
  - 跳转到审核页面
  - **预估时间**: 0.5天

- [ ] **严重AE提醒推送**
  - 患者记录严重AE后触发
  - 推送医生:"患者[姓名]记录了严重不良事件,请及时查看"
  - 跳转到AE详情页
  - 高优先级推送
  - **预估时间**: 0.5天

- [ ] **新患者绑定推送**
  - 患者绑定医生后触发
  - 推送医生:"患者[姓名]已选择您为主治医生"
  - 跳转到患者详情页
  - **预估时间**: 0.5天

**微信订阅消息子模块总计**: 5天

---

### 6.2 站内消息子模块

#### 后端任务
- [ ] **消息记录接口**
  - 创建消息: `POST /push-messages`
  - 消息列表: `GET /push-messages?receiver_id=xx`
  - 未读消息数: `GET /push-messages/unread-count`
  - 标记已读: `PATCH /push-messages/:id/read`
  - 批量标记已读: `PATCH /push-messages/read-all`
  - 删除消息: `DELETE /push-messages/:id`
  - **预估时间**: 1.5天

#### 前端任务(小程序 - 患者端+医生端)
- [ ] **消息中心页面**
  - 消息列表(标题、内容、时间)
  - 未读/已读状态
  - 消息类型图标
  - 点击跳转到相关页面
  - 下拉刷新
  - **预估时间**: 2天

- [ ] **消息红点提示**
  - TabBar消息图标红点
  - 未读消息数量显示
  - 实时更新
  - **预估时间**: 1天

#### 前端任务(Web后台 - 医生端)
- [ ] **消息通知弹窗**
  - 顶部消息图标
  - 点击显示下拉列表
  - 未读消息红点
  - 查看全部消息
  - **预估时间**: 1.5天

**站内消息子模块总计**: 6天

---

### 6.3 定时任务子模块

#### 后端任务
- [ ] **定时任务框架集成**
  - node-cron集成
  - 任务调度配置
  - 任务执行日志
  - **预估时间**: 1天

- [ ] **时间窗口检查定时任务**
  - 每天早上9:00检查
  - 查询当天进入时间窗口的患者
  - 推送阶段开放提醒
  - **预估时间**: 1天

- [ ] **超时催办定时任务**
  - 每天早上9:00检查
  - 查询距离截止还有1天的患者
  - 推送超时催办通知
  - **预估时间**: 1天

- [ ] **患者超时未完成定时任务**
  - 每天晚上21:00检查
  - 查询已超时未提交的患者
  - 推送医生超时提醒
  - **预估时间**: 1天

**定时任务子模块总计**: 4天

---

## 第6阶段总结

**总任务数**: 15个任务
**总预估工期**: 15天 (约3周,考虑并行开发可压缩到2周)
**关键交付物**:
- ✅ 微信订阅消息推送(7种场景)
- ✅ 站内消息中心
- ✅ 定时任务系统(时间窗口检查、超时催办)
- ✅ 消息推送成功率统计

**并行开发建议**:
- 后端微信推送+定时任务(1人,1.5周)
- 后端站内消息接口(1人,1周)
- 前端小程序消息中心(1人,1.5周)
- 前端Web消息通知(1人,1周)

---

## 第7阶段:数据统计与导出模块 (优先级:⭐⭐⭐)

### 依赖关系
- **前置依赖**: 所有业务模块(需要完整数据)
- **后续依赖**: 无

### 7.1 数据统计子模块

#### 后端任务
- [ ] **患者统计接口**
  - 患者总数统计
  - 各医院患者分布
  - 各医生管理患者数
  - 患者性别分布
  - 患者年龄分布
  - **接口**: `GET /statistics/patients`
  - **预估时间**: 1天

- [ ] **阶段统计接口**
  - 各阶段患者数量(V1/V2/V3/V4/已完成)
  - 各阶段通过率
  - 各阶段平均完成时间
  - 超时率统计
  - **接口**: `GET /statistics/stages`
  - **预估时间**: 1天

- [ ] **量表统计接口**
  - 各量表平均分
  - 各量表得分分布
  - 各阶段得分对比
  - 得分趋势数据
  - **接口**: `GET /statistics/scales`
  - **预估时间**: 1天

- [ ] **AE统计接口**
  - AE总数
  - AE严重程度分布
  - 严重AE数量和占比
  - AE与药物关系分析
  - AE发生率
  - **接口**: `GET /statistics/adverse-events`
  - **预估时间**: 1天

- [ ] **用药统计接口**
  - 各剂量(5mg/10mg)使用人数
  - 平均用药天数
  - 用药依从性统计
  - 合并用药种类统计
  - **接口**: `GET /statistics/medications`
  - **预估时间**: 1天

- [ ] **医生工作量统计接口**
  - 各医生管理患者数
  - 各医生审核数量
  - 各医生审核通过率
  - 各医生平均审核时间
  - **接口**: `GET /statistics/doctors`
  - **预估时间**: 1天

#### 前端任务(Web后台)
- [ ] **仪表盘总览页面**
  - 关键指标卡片:
    - 患者总数
    - 各阶段患者数
    - 待审核数量
    - 严重AE数量
  - 患者阶段分布饼图(ECharts)
  - 量表得分趋势折线图
  - AE统计柱状图
  - 最近动态列表
  - **预估时间**: 3天

- [ ] **患者统计页面**
  - 患者总览表格
  - 性别分布饼图
  - 年龄分布柱状图
  - 各医院患者数对比
  - **预估时间**: 2天

- [ ] **量表统计页面**
  - 各量表平均分对比
  - 量表得分分布直方图
  - 各阶段得分对比折线图
  - **预估时间**: 2天

- [ ] **AE统计页面**
  - AE总数和发生率
  - 严重程度分布饼图
  - 与药物关系统计
  - 时间趋势图
  - **预估时间**: 2天

- [ ] **医生工作量统计页面**
  - 各医生患者数柱状图
  - 审核工作量统计
  - 审核通过率对比
  - **预估时间**: 2天

**数据统计子模块总计**: 17天

---

### 7.2 数据导出子模块

#### 后端任务
- [ ] **Excel导出功能封装**
  - 使用exceljs库
  - 多sheet支持
  - 样式配置(表头加粗、边框等)
  - **预估时间**: 1天

- [ ] **PDF导出功能封装**
  - 使用puppeteer库
  - HTML模板渲染
  - 标准化报告格式
  - **预估时间**: 1.5天

- [ ] **患者基本信息导出接口**
  - 导出字段:患者编号、姓名、性别、年龄、医院、医生、入组日期、当前阶段
  - 支持Excel和PDF格式
  - 支持筛选条件(医院、医生、阶段、时间范围)
  - **接口**: `POST /exports/patients`
  - **预估时间**: 1天

- [ ] **量表数据导出接口**
  - 导出字段:患者信息、量表名称、阶段、填写时间、各题得分、总分
  - Excel格式:多个sheet,每个量表一个sheet
  - PDF格式:标准化报告,包含图表
  - 支持筛选条件(量表类型、阶段、时间范围、医院、医生)
  - **接口**: `POST /exports/scales`
  - **预估时间**: 1.5天

- [ ] **AE数据导出接口**
  - 导出字段:患者信息、事件名称、严重程度、发生时间、处理措施、结局等
  - 支持Excel和PDF格式
  - 支持筛选条件(严重程度、时间范围、医院、医生)
  - **接口**: `POST /exports/adverse-events`
  - **预估时间**: 1天

- [ ] **用药记录导出接口**
  - 导出字段:患者信息、药物名称、剂量、用药时间、依从性等
  - 支持Excel和PDF格式
  - 支持筛选条件(剂量、阶段、时间范围)
  - **接口**: `POST /exports/medications`
  - **预估时间**: 1天

- [ ] **综合报告导出接口**
  - 包含:患者基本信息、所有量表得分、AE记录、用药记录
  - 格式:PDF标准化临床研究报告
  - **接口**: `POST /exports/comprehensive-report`
  - **预估时间**: 2天

- [ ] **导出任务队列**
  - 大数据量导出使用异步任务
  - 导出进度提示
  - 导出文件临时存储(24小时过期)
  - **预估时间**: 1.5天

#### 前端任务(Web后台)
- [ ] **数据导出页面**
  - 导出类型选择(患者信息/量表数据/AE数据/用药记录/综合报告)
  - 筛选条件设置(时间范围、医院、医生、阶段等)
  - 导出格式选择(Excel/PDF)
  - "导出"按钮
  - 导出进度提示
  - 导出文件下载
  - **预估时间**: 3天

- [ ] **导出历史记录页面**
  - 历史导出记录列表
  - 导出状态(进行中/已完成/失败)
  - 重新下载
  - 删除记录
  - **预估时间**: 1.5天

**数据导出子模块总计**: 15.5天

---

## 第7阶段总结

**总任务数**: 20个任务
**总预估工期**: 32.5天 (约6.5周,考虑并行开发可压缩到2周)
**关键交付物**:
- ✅ 完整的数据统计仪表盘(患者、阶段、量表、AE、用药、医生工作量)
- ✅ 数据可视化图表(饼图、柱状图、折线图)
- ✅ 5种数据导出功能(Excel和PDF格式)
- ✅ 综合报告导出(标准化临床研究报告格式)
- ✅ 异步导出任务队列(大数据量优化)

**并行开发建议**:
- 后端统计接口(1人,1.5周)
- 后端导出功能(1人,2周)
- 前端统计页面(1人,2.5周)
- 前端导出页面(1人,1.5周)

---

## 总体开发计划总结

### 模块依赖图

```
第1阶段:基础设施模块 (2周)
    │
    ├─→ 第2阶段:用户管理模块 (2周)
    │       │
    │       └─→ 第4阶段:阶段流程核心模块 (4周)
    │               │
    │               ├─→ 第5阶段:审核系统模块 (2周)
    │               │       │
    │               │       └─→ 第6阶段:消息通知模块 (2周)
    │               │
    │               └─→ 第7阶段:数据统计与导出模块 (2周)
    │
    └─→ 第3阶段:量表管理模块 (3周,可并行)
            │
            └─→ 第4阶段:阶段流程核心模块 (4周)
```

### 总体工期估算

| 阶段 | 任务数 | 预估工期(串行) | 预估工期(并行) |
|------|--------|---------------|---------------|
| 第1阶段:基础设施 | 62 | 6周 | 2周 |
| 第2阶段:用户管理 | 27 | 5.5周 | 2周 |
| 第3阶段:量表管理 | 25 | 6周 | 3周 |
| 第4阶段:阶段流程 | 35 | 8周 | 4周 |
| 第5阶段:审核系统 | 16 | 5周 | 2周 |
| 第6阶段:消息通知 | 15 | 3周 | 2周 |
| 第7阶段:数据统计与导出 | 20 | 6.5周 | 2周 |
| **总计** | **200** | **40周** | **17周** |

### 并行开发策略

**推荐团队配置**:
- 后端开发工程师:2人
- 前端开发工程师(小程序):2人
- 前端开发工程师(Web):1人
- UI/UX设计师:1人
- 测试工程师:1人
- 项目经理:1人

**时间线**(17周):
- Week 1-2: 第1阶段(基础设施)
- Week 3-4: 第2阶段(用户管理) + 第3阶段(量表管理,并行)
- Week 5: 第3阶段(量表管理,完成)
- Week 6-9: 第4阶段(阶段流程核心)
- Week 10-11: 第5阶段(审核系统)
- Week 12-13: 第6阶段(消息通知)
- Week 14-15: 第7阶段(数据统计与导出)
- Week 16-17: 集成测试与优化

---

## 附录:任务清单使用说明

### 如何使用本清单

1. **复制到项目管理工具**:
   - 推荐工具:Jira、Trello、Asana、Teambition
   - 将每个任务创建为独立的Issue/Card
   - 设置任务优先级、负责人、截止日期

2. **任务追踪**:
   - 使用[ ]复选框标记任务完成状态
   - 定期更新任务进度
   - 记录实际耗时vs预估时间

3. **并行开发协调**:
   - 严格遵守模块依赖关系
   - 前后端定期对齐接口
   - 每周进行模块集成测试

4. **风险控制**:
   - 关键路径:基础设施 → 用户管理 → 阶段流程 → 审核系统
   - 每个阶段完成后进行里程碑评审
   - 及时调整计划

### 任务优先级说明

- ⭐⭐⭐⭐⭐ 最高优先级:必须最先完成,阻塞其他模块
- ⭐⭐⭐⭐ 高优先级:核心业务功能
- ⭐⭐⭐ 中等优先级:重要但非核心功能

### 预估时间说明

- 预估时间基于**单个开发人员**的工作量
- 实际开发时可根据团队技能水平调整
- 并行开发可显著缩短总工期

---

**文档结束**

祝开发顺利! 🚀
